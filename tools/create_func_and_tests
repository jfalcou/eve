##==================================================================================================
##  EVE - Expressive Vector Engine
##  Copyright 2019 Joel FALCOU
##  Copyright 2019 Jean-Thierry LAPRESTE
##
##  Licensed under the MIT License <http://opensource.org/licenses/MIT>.
##  SPDX-License-Identifier: MIT
##==================================================================================================
#!/bin/bash
# crée les fichiers de la fonction $2 à partir des fichiers de $1,  $3 est le chemin de eve

if [ "$#" -eq 0 ]
then
  echo 'usage: create_func_and_tests $1 $2 $3:  create the files of function $2 from the files of the function $1'
  echo 'of course if the names are properly changed the code has to be edited'
  echo '$3 may contain the path to eve which by default is supposed pwd'
  return
elif [ "$#" -eq 1 ]
then
  echo "create_func_and_tests: invalid number of arguments"
  return
elif  [ "$#" -eq 2 ]
then
  rootdir=$(pwd)
  echo "create the files of a function "$2" from the files of the function "$1
  echo "root is "$rootdir
else
  rootdir=$3
  echo "create the files of a function "$2" from the files of the function "$1
  echo "root is "$rootdir
fi

from=$1
to=$2

source $rootdir/tools/create_func_from_to $from $to
source $rootdir/tools/create_simd_test_from_to $from $to
source $rootdir/tools/create_scalar_test_from_to $from $to
source $rootdir/tools/create_doc_test_from_to $from $to
source $rootdir/tools/create_bench_from_to $from $to
source $rootdir/tools/is_purely_common $to