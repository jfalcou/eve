<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="generator" content="Doxygen 1.9.4"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>E.V.E: Building and Testing</title>
  <!--<link href="tabs.css" rel="stylesheet" type="text/css"/> REMOVED BY DOXYSTRAP -->
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="godbolt.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxystrap.css" rel="stylesheet" type="text/css"/>
  <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src="doxystrap.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <!-- Custom input to switch branches -->
  <script>
    function switchBranchAction() {
      var branch = document.getElementById("branch_input").value;
      var form = this;
      window.location.href = window.location.hostname + '/en/' + branch;
    }
  </script>
  <!-- DOXYSTRAP BLOCK CHANGE END -->
</head>
<body>
  <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
  <nav class="navbar navbar-default" role="navigation">
    <div class="container">
      <div class="navbar-header">
      <!--GITHUB RIBBON-->
      <a id="forkme_banner" href="https://github.com/jfalcou/eve">View on GitHub</a>
      <!--GITHUB RIBBON-->
        <a href="index.html" class="navbar-brand">E.V.E v2022.03.00</a>
      </div>
    </div>
  </nav>
  <!-- DOXYSTRAP BLOCK CHANGE END -->
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
    <div class="content" id="content">
      <div class="container">
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a href="index.html"><img alt="Logo" src="logo.png" /></a>
                </td>
                <td id="projectalign" style="padding-left: 0.5em;">
                  <div id="projectname">E.V.E
                    &#160;<span id="projectnumber">v2022.03.00</span>
                  </div>
                  <!-- BEGIN PROJECT_BRIEF--><div id="projectbrief">The Expressive Vector Engine</div><!--END PROJECT_BRIEF -->
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row">
          <div class="col-sm-12 panel " style="padding-bottom: 15px;">
            <div style="margin-bottom: 15px;">
              <!-- DOXYSTRAP BLOCK CHANGE END -->
              <!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Index</span></a></li>
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>References</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="about.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="tutorials.html"><span>Tutorials</span></a></li>
      <li><a href="rationale.html"><span>Rationale</span></a></li>
      <li><a href="eve-dev.html"><span>Contributing</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="eve-dev.html">EVE Development</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Building and Testing </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#dev_cmake_setup">CMake setup</a></li>
<li class="level1"><a href="#dev_build_test">Compiling EVE Unit Tests</a></li>
<li class="level1"><a href="#dev_build_random">Compiling EVE Random Tests</a></li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_eve_doc_dev_dev_cmake"></a></p>
<p >From now on, we make the assumption your Docker instance is running and that you're logged into its interactive shell as per <a class="el" href="dev_environment.html">the protocol previously defined</a>. In this tutorial, we will go over the process to configure the tests and run them properly.</p>
<h1><a class="anchor" id="dev_cmake_setup"></a>
CMake setup</h1>
<p >First, you'd need to create a build directory and cd into it</p>
<pre class="fragment">mkdir build_arch &amp;&amp; cd build_arch
</pre><p ><b>EVE</b> provides a set of CMake toolchain files configured for each compiler present in the Docker instance. You can simply use them to configure your CMake. If you want to pass additional options, like specific architecture or optimization settings, you can use the <code>-DEVE_OPTIONS</code> CMake arguments.</p>
<p >The following table provides the CMake command line used for our classic CI setup using the Ninja generator.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">CMake command    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Emulated   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-DEVE_NO_SIMD'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_sse2   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-msse2'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_sse2-asan   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.asan.cmake -DEVE_OPTIONS='-msse2'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_sse4   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-msse4'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_avx   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_avx2   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx2'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_fma   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx2 -mfma'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_avx512   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-march=skylake-avx512'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_avx512_no_native   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.sde.cmake -DEVE_OPTIONS='-march=skylake-avx512'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Aarch64(arm-v8)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.aarch64.cmake    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Arm (arm-v7)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.arm.cmake    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">wasm   </td><td class="markdownTableBodyNone">emcmake cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE='../cmake/toolchain/emcc.cmake'   </td></tr>
</table>
<p >Once run, your build folder should contain all the necessary artifact to compile and run <b>EVE</b> test suite.</p>
<h1><a class="anchor" id="dev_build_test"></a>
Compiling EVE Unit Tests</h1>
<p ><b>EVE</b> provides a large number of test targets that are grouped by theme. Each of these themes and tests with a theme can be compiled with a proper target.</p>
<p >In term of options, we encourage you to use the <code>-DEVE_NO_FORCEINLINE</code> macro that prevents costly optimization to be used during the compilation of tests.</p>
<p >The following table list the main high-level themed target.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>doc.exe</code>   </td><td class="markdownTableBodyNone">Target for all documentation examples    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>doc.core.exe</code>   </td><td class="markdownTableBodyNone">Target for functions documentation examples    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>examples.exe</code>   </td><td class="markdownTableBodyNone">Target for all tutorials    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>examples.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for algorithms related tutorials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>examples.oop.exe</code>   </td><td class="markdownTableBodyNone">Target for UDT related tutorials    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.exe</code>   </td><td class="markdownTableBodyNone">Target for all unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for standard algorithm unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.api.exe</code>   </td><td class="markdownTableBodyNone">Target for base API unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.arch.exe</code>   </td><td class="markdownTableBodyNone">Target for architecture detection unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.constant.exe</code>   </td><td class="markdownTableBodyNone">Target for constant unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.internals.exe</code>   </td><td class="markdownTableBodyNone">Target for internal components unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.memory.exe</code>   </td><td class="markdownTableBodyNone">Target for memory handling unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.meta.exe</code>   </td><td class="markdownTableBodyNone">Target for traits unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.real.exe</code>   </td><td class="markdownTableBodyNone">Target for all functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.real.algorithm.exe</code>   </td><td class="markdownTableBodyNone">Target for SIMD algorithms unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.real.combinatorial.exe</code>   </td><td class="markdownTableBodyNone">Target for combinatorics functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.real.core.exe</code>   </td><td class="markdownTableBodyNone">Target for arithmetic functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.real.elliptic.exe</code>   </td><td class="markdownTableBodyNone">Target for elliptic functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.real.math.exe</code>   </td><td class="markdownTableBodyNone">Target for math functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.real.polynomial.exe</code>   </td><td class="markdownTableBodyNone">Target for polynomial functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.real.probas.exe</code>   </td><td class="markdownTableBodyNone">Target for probability functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.real.special.exe</code>   </td><td class="markdownTableBodyNone">Target for special functions unit tests   </td></tr>
</table>
<p >For example, the test for the <code>abs</code> function, which is a member of the arithmetic module, can be compiled via:</p>
<pre class="fragment">ninja unit.real.core.abs.exe
</pre><p >Once compiled, the test executable are located in the <code>unit</code> folder and can be run via:</p>
<pre class="fragment">./unit/unit.real.core.abs.exe
</pre><p >The <code>unit.exe</code> target is very large and requires a comfortable amount of CPUs to be compiled in parallel.</p>
<h1><a class="anchor" id="dev_build_random"></a>
Compiling EVE Random Tests</h1>
<p >Random tests run a given function over a samples of random values to test its relative precision. The following table list the main high-level random target.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.exe</code>   </td><td class="markdownTableBodyNone">Target for all random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for standard algorithm random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.api.exe</code>   </td><td class="markdownTableBodyNone">Target for base API random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.arch.exe</code>   </td><td class="markdownTableBodyNone">Target for architecture detection random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.constant.exe</code>   </td><td class="markdownTableBodyNone">Target for constant random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.internals.exe</code>   </td><td class="markdownTableBodyNone">Target for internal components random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.memory.exe</code>   </td><td class="markdownTableBodyNone">Target for memory handling random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.meta.exe</code>   </td><td class="markdownTableBodyNone">Target for traits random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.real.exe</code>   </td><td class="markdownTableBodyNone">Target for all functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.real.algorithm.exe</code>   </td><td class="markdownTableBodyNone">Target for SIMD algorithms random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.real.combinatorial.exe</code>   </td><td class="markdownTableBodyNone">Target for combinatorics functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.real.core.exe</code>   </td><td class="markdownTableBodyNone">Target for arithmetic functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.real.elliptic.exe</code>   </td><td class="markdownTableBodyNone">Target for elliptic functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.real.math.exe</code>   </td><td class="markdownTableBodyNone">Target for math functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.real.polynomial.exe</code>   </td><td class="markdownTableBodyNone">Target for polynomial functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.real.probas.exe</code>   </td><td class="markdownTableBodyNone">Target for probability functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.real.special.exe</code>   </td><td class="markdownTableBodyNone">Target for special functions random tests   </td></tr>
</table>
<p >For example, all the random tests for the <code>abs</code> function, which is a member of the arithmetic module, can be compiled via:</p>
<pre class="fragment">ninja random.real.core.abs.exe
</pre><p >Once compiled, the test executable are located in the <code>unit</code> folder and can be run via:</p>
<pre class="fragment">./unit/unit.real.core.abs.exe
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
<hr class="footer"/>
</body>
</html>
