<!-- HTML header for doxygen 1.8.20-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="generator" content="Doxygen 1.9.4"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>E.V.E: Semantic of EVE functions</title>
  <!--<link href="tabs.css" rel="stylesheet" type="text/css"/> REMOVED BY DOXYSTRAP -->
  <script type="text/javascript" src="jquery.js"></script>
  <script type="text/javascript" src="dynsections.js"></script>
  <script type="text/javascript" src="godbolt.js"></script>
  <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
  <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
  <link href="doxygen.css" rel="stylesheet" type="text/css" />
  <link href="doxystrap.css" rel="stylesheet" type="text/css"/>
  <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
  <link href='https://fonts.googleapis.com/css?family=Roboto+Slab' rel='stylesheet' type='text/css'>
  <script type="text/javascript" src="doxystrap.js"></script>
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
  <!-- Optional theme -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">
  <!-- Latest compiled and minified JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
  <!-- Custom input to switch branches -->
  <script>
    function switchBranchAction() {
      var branch = document.getElementById("branch_input").value;
      var form = this;
      window.location.href = window.location.hostname + '/en/' + branch;
    }
  </script>
  <!-- DOXYSTRAP BLOCK CHANGE END -->
</head>
<body>
  <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
  <nav class="navbar navbar-default" role="navigation">
    <div class="container">
      <div class="navbar-header">
      <!--GITHUB RIBBON-->
      <a id="forkme_banner" href="https://github.com/jfalcou/eve">View on GitHub</a>
      <!--GITHUB RIBBON-->
        <a href="index.html" class="navbar-brand">E.V.E v2022.03.00</a>
      </div>
    </div>
  </nav>
  <!-- DOXYSTRAP BLOCK CHANGE END -->
  <div id="top"><!-- do not remove this div, it is closed by doxygen! -->
    <!-- DOXYSTRAP BLOCK CHANGE BEGIN -->
    <div class="content" id="content">
      <div class="container">
        <div id="titlearea">
          <table cellspacing="0" cellpadding="0">
            <tbody>
              <tr style="height: 56px;">
                <td id="projectlogo"><a href="index.html"><img alt="Logo" src="logo.png" /></a>
                </td>
                <td id="projectalign" style="padding-left: 0.5em;">
                  <div id="projectname">E.V.E
                    &#160;<span id="projectnumber">v2022.03.00</span>
                  </div>
                  <!-- BEGIN PROJECT_BRIEF--><div id="projectbrief">The Expressive Vector Engine</div><!--END PROJECT_BRIEF -->
                </td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="row">
          <div class="col-sm-12 panel " style="padding-bottom: 15px;">
            <div style="margin-bottom: 15px;">
              <!-- DOXYSTRAP BLOCK CHANGE END -->
              <!-- end header part -->
<!-- Generated by Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Index</span></a></li>
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>References</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li class="current"><a href="pages.html"><span>Documentation</span></a></li>
      <li><a href="about.html"><span>Getting&#160;Started</span></a></li>
      <li><a href="tutorials.html"><span>Tutorials</span></a></li>
      <li><a href="rationale.html"><span>Rationale</span></a></li>
      <li><a href="eve-dev.html"><span>Contributing</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="rationale.html">Rationale</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Semantic of EVE functions </div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#glossary_op_classes">Operations Classification</a><ul><li class="level2"><a href="#glossary_access">Generalized Element Access</a></li>
<li class="level2"><a href="#glossary_elementwise">Elementwise Operations</a></li>
<li class="level2"><a href="#glossary_reduction">Reductions</a></li>
</ul>
</li>
<li class="level1"><a href="#glossary_function_semantic">Function Semantic</a><ul><li class="level2"><a href="#glossary_arithmetic">Arithmetic Functions</a></li>
<li class="level2"><a href="#glossary_bitwise">Bitwise Functions</a></li>
<li class="level2"><a href="#glossary_logical">Logical Functions</a></li>
<li class="level2"><a href="#glossary_constant">Constant Functions</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p ><a class="anchor" id="md_eve_doc_rationale_semantic"></a></p>
<p ><b>EVE</b> provides a lot of function that operates on similar premises. This page gather the general behaviors <b>EVE</b> functions can exhibit.</p>
<h1><a class="anchor" id="glossary_op_classes"></a>
Operations Classification</h1>
<h2><a class="anchor" id="glossary_access"></a>
Generalized Element Access</h2>
<p ><b>EVE</b> functions' semantics rely on a generic way to access an element of a <a class="el" href="concepteve_1_1value.html">value</a>, be it <a class="el" href="concepteve_1_1scalar__value.html">scalar</a> or <a class="el" href="concepteve_1_1simd__value.html">SIMD</a>.</p>
<p >To do so, we define a synthetic function <code>at(v,i)</code> that retrieve the <code>i</code>th element of a value <code>v</code>.</p>
<div class="fragment"><div class="line"><span class="keyword">template</span>&lt;eve::value V, std::<span class="keywordtype">int</span>egral I&gt; <span class="keyword">auto</span> at(V <span class="keyword">const</span>&amp; v,  I i)</div>
<div class="line">{</div>
<div class="line">  <span class="keywordflow">if</span> <span class="keyword">constexpr</span>( <a class="code hl_concept" href="concepteve_1_1simd__value.html">eve::simd_value&lt;V&gt;</a>)   <span class="keywordflow">return</span> v.get(i);</div>
<div class="line">  <span class="keywordflow">else</span>                                <span class="keywordflow">return</span> v;</div>
<div class="line">}</div>
<div class="ttc" id="aconcepteve_1_1simd__value_html"><div class="ttname"><a href="concepteve_1_1simd__value.html">eve::simd_value</a></div><div class="ttdoc">Specifies that a type a SIMD type.</div><div class="ttdef"><b>Definition:</b> vectorized.hpp:32</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="glossary_elementwise"></a>
Elementwise Operations</h2>
<p >Elementwise operations in <b>EVE</b> describe functions that operates in a regular pattern over each and every element of its input and generates a return value with the same cardinal as its inputs.</p>
<p >For any <a class="el" href="concepteve_1_1value.html">values</a> <code>x1</code>, ..., <code>xn</code> of types <code>T1</code>, ..., <code>Tn</code>, a Callable Object <code>f</code> returning a <a class="el" href="concepteve_1_1value.html">value</a> of type <code>R</code> is said to be <b>Elementwise</b> if the expression <code>R r = f(x1, ...,xn)</code> is semantically equivalent to:</p>
<ul>
<li>if <code>R</code> models <a class="el" href="concepteve_1_1simd__value.html" title="Specifies that a type a SIMD type.">eve::simd_value</a>: <code>R r = [](auto i, auto) { return f(at(x1,i), ..., at(xn,i)); }</code></li>
<li>if <code>R</code> models <a class="el" href="concepteve_1_1scalar__value.html" title="Specify that a type represents a scalar value.">eve::scalar_value</a>: <code>R r = return f(x1,  ..., xn)</code></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>No constraints are required on either the input or output types.</dd></dl>
<hr  />
<h2><a class="anchor" id="glossary_reduction"></a>
Reductions</h2>
<p >Elementwise operations in <b>EVE</b> describe functions that operates over all elements of a given <a class="el" href="concepteve_1_1value.html">value</a> to produce a single <a class="el" href="concepteve_1_1scalar__value.html">scalar result</a>.</p>
<p >For any <a class="el" href="concepteve_1_1value.html">value</a> <code>x</code> of type <code>T</code>, a Callable Object <code>f</code> returning a <a class="el" href="concepteve_1_1scalar__value.html">scalar value</a> of type <code><a class="el" href="structeve_1_1element__type.html" title="Extracts the scalar part of a type.">eve::element_type</a>&lt;T&gt;</code> is said to be a <b>Reduction</b>.</p>
<h1><a class="anchor" id="glossary_function_semantic"></a>
Function Semantic</h1>
<h2><a class="anchor" id="glossary_arithmetic"></a>
Arithmetic Functions</h2>
<p >For any <a class="el" href="concepteve_1_1value.html">values</a> <code>x1</code>, ..., <code>xn</code> of types <code>T1</code>, ..., <code>Tn</code> so that the expression <code>using C = eve::common_compatible_t&lt;T1,...,Tn&gt;</code> is valid, a Callable Object <code>f</code> is said to be an <b>Arithmetic Function</b> if the expression <code>C r = f(x1, ...,xn)</code> is semantically equivalent to:</p>
<ul>
<li>if <code>C</code> models <a class="el" href="concepteve_1_1simd__value.html" title="Specifies that a type a SIMD type.">eve::simd_value</a>: <code>C r = [](auto i, auto) { return f(at(C(x1),i), ..., at(C(xn),i)); }</code></li>
<li>if <code>C</code> models <a class="el" href="concepteve_1_1scalar__value.html" title="Specify that a type represents a scalar value.">eve::scalar_value</a>: <code>C r = return f(C(x1), ..., C(xn))</code></li>
</ul>
<p >In a less formal way, <b>EVE</b> <a class="el" href="glossary_semantic.html#glossary_arithmetic">Arithmetic Functions</a> generalizes the notion of native C++ arithmetic operations.</p>
<dl class="section note"><dt>Note</dt><dd>A large majority of <a class="el" href="glossary_semantic.html#glossary_arithmetic">Arithmetic Functions</a> are <em>de facto</em> <a class="el" href="glossary_semantic.html#glossary_elementwise">Elementwise Operations</a> .</dd></dl>
<hr  />
<h2><a class="anchor" id="glossary_bitwise"></a>
Bitwise Functions</h2>
<p >For any <a class="el" href="concepteve_1_1value.html">values</a> <code>x1</code>, ..., <code>xn</code> of types <code>T1</code>, ..., <code>Tn</code>so that the expression <code>eve::bit_compatible_values&lt;T1,...,Tn&gt;</code> evaluates to <code>true</code>, a Callable Object <code>f</code> is said to be a <b>Bitwise Function</b> if the expression <code>T1 r = f(x1, ..., xn)</code> is semantically equivalent to:</p>
<ul>
<li>if <code>T1</code> models <a class="el" href="concepteve_1_1simd__value.html" title="Specifies that a type a SIMD type.">eve::simd_value</a>: <code>T1 r = [](auto i, auto) { return f(at(x1,i),... at(</code><code>eve::bit_cast(xn,</code><code><a class="el" href="structeve_1_1as.html" title="Lightweight type-wrapper.">eve::as(x1)</a></code><code>),i); }</code></li>
<li>if <code>T1</code> models <a class="el" href="concepteve_1_1scalar__value.html" title="Specify that a type represents a scalar value.">eve::scalar_value</a>: <code>T1 r = return f(x1,...</code><code>eve::bit_cast(xn,</code><code><a class="el" href="structeve_1_1as.html" title="Lightweight type-wrapper.">eve::as(x1)</a></code><code>))</code></li>
</ul>
<p >In a less formal way, <b>EVE</b> <a class="el" href="glossary_semantic.html#glossary_bitwise">Bitwise Functions</a> can be applied to any pair of types, the first acting as the value type and the second as a type-less source of bits.</p>
<dl class="section note"><dt>Note</dt><dd>A large majority of <a class="el" href="glossary_semantic.html#glossary_bitwise">Bitwise Functions</a> are <em>de facto</em> <a class="el" href="glossary_semantic.html#glossary_elementwise">Elementwise Operations</a> .</dd></dl>
<hr  />
<h2><a class="anchor" id="glossary_logical"></a>
Logical Functions</h2>
<p ><b>EVE</b> <a class="el" href="glossary_semantic.html#glossary_logical">Logical Functions</a> are <a class="el" href="glossary_semantic.html#glossary_arithmetic">Arithmetic Functions</a> that can only be applied to [logical values][<a class="el" href="concepteve_1_1logical__value.html">eve::logical_value</a>) <code>L1</code>,... <code>Ln</code> that verify that either <code><a class="el" href="structeve_1_1cardinal.html" title="Computes the cardinal of a given type.">eve::cardinal</a></code><code>&lt;L1&gt;::value ==</code><code><a class="el" href="structeve_1_1cardinal.html" title="Computes the cardinal of a given type.">eve::cardinal</a></code><code>&lt;Ln&gt;::value</code> or that, for a given <code>n</code>, the expression <code>std::same_as&lt;</code><code><a class="el" href="structeve_1_1cardinal.html" title="Computes the cardinal of a given type.">eve::cardinal</a></code><code>&lt;Ln&gt;,</code><code><a class="el" href="structeve_1_1scalar__cardinal.html" title="Cardinal type for scalar values.">eve::scalar_cardinal</a></code><code>&gt;</code> evaluates to <code>true</code>.</p>
<p >In a less formal way, <b>EVE</b> <a class="el" href="glossary_semantic.html#glossary_logical">Logical Functions</a> can be applied to set of <a class="el" href="concepteve_1_1logical__value.html">logical values</a> as long as they all share the same <a class="el" href="structeve_1_1cardinal.html">number of lanes</a>, except for any potential logical scalar values.</p>
<dl class="section note"><dt>Note</dt><dd>A large majority of <a class="el" href="glossary_semantic.html#glossary_logical">Logical Functions</a> are <em>de facto</em> <a class="el" href="glossary_semantic.html#glossary_elementwise">Elementwise Operations</a> .</dd></dl>
<hr  />
<h2><a class="anchor" id="glossary_constant"></a>
Constant Functions</h2>
<p >Some of the object functions defined by <b>EVE</b> have as only parameter a <code>target</code> value. All but two (see above) are reputed to be constants of the type referenced by the target.</p>
<p >For instance <code><a class="el" href="group__core_ga6a98ab15a9dca6c0d761b0505b222cc5.html#ga6a98ab15a9dca6c0d761b0505b222cc5" title="Callable object computing the 1 value.">eve::one</a>(<a class="el" href="structeve_1_1as.html" title="Lightweight type-wrapper.">eve::as</a>&lt;float&gt;())</code> is merely 1.0f, <code><a class="el" href="group__core_ga6a98ab15a9dca6c0d761b0505b222cc5.html#ga6a98ab15a9dca6c0d761b0505b222cc5" title="Callable object computing the 1 value.">eve::one</a>(<a class="el" href="structeve_1_1as.html" title="Lightweight type-wrapper.">eve::as</a>&lt;<a class="el" href="structeve_1_1wide.html" title="Wrapper for SIMD registers.">eve::wide</a>&lt;float&gt;&gt;())</code> is a <code><a class="el" href="structeve_1_1wide.html" title="Wrapper for SIMD registers.">eve::wide</a>&lt;float&gt;</code> value filled with elements equal to 1.0f.</p>
<p >All these constants can be bracketed using decorators downward and upward. This means that for all constants, say of name xxx, one have </p><pre class="fragment">        downward(xxx)(as&lt;T&gt;()) &lt;= xxx(as&lt;T&gt;()) &lt;= upward(xxx)(as&lt;T&gt;()).
</pre><p> For most constants the 3 values are identical, but this is not the case when the constant semantic is a mathematical value which does not possess an exact representation in the target type. For instance think of pi or sqrt(2) for ieee floating type values.</p>
<p >In these later cases the direct call to constant value always returns the nearest representable value to the mathematical constant, but it is constant dependant if this effective value is less or greater than the full precision mathematical value.</p>
<p >For pi:</p><ul>
<li>eve::pi(as&lt;float&gt;()) is greater than the mathematical pi</li>
<li>eve::pi(as&lt;double&gt;()) is less than the mathematical pi</li>
</ul>
<p >The decorators give the guarantee that if math(xxx) is the (not representable) mathematical value, we get: </p><pre class="fragment">        downward(xxx)(as&lt;T&gt;()) &lt;= math(xxx) &lt;= upward(xxx)(as&lt;T&gt;())
</pre><p> for all supported target with ordered type. Of course one of these two values is the constant itself and the two values differs at most by 0.5ulp.</p>
<dl class="section note"><dt>Note</dt><dd>Special case of <a class="el" href="group__core_gac1255364700394f5b94065c935208f42.html#gac1255364700394f5b94065c935208f42" title="Callable object computing the logical true_ value.">eve::true_</a> and <a class="el" href="group__core_gaa4d31095ad4a8a7f19a8002765638fc6.html#gaa4d31095ad4a8a7f19a8002765638fc6" title="Callable object computing the logical false_ value.">eve::false_</a> <pre class="fragment">    - they are the only constants whose name ends with an underscore (for obvious language limitations reason),
    - eve::true_(as&lt;T&gt;()) and eve::false_(as&lt;T&gt;()) do not return a value of type T but as_logical&lt;T&gt;.
    - they do not support any decorator.
</pre> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
<hr class="footer"/>
</body>
</html>
