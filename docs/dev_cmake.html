<!-- HTML header for doxygen 1.9.5-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.5"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>E.V.E: Building for Testing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="godbolt.js"></script>
<script type="text/javascript" src="fragment.js"></script>
<script type="text/javascript" src="paragraph.js"></script>
<script type="text/javascript">
  DoxygenAwesomeParagraphLink.init()
  DoxygenAwesomeFragmentCopyButton.init()
  SendToGodbolt.init()
</script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<a href="https://github.com/jfalcou/eve" class="github-corner" title="View source on GitHub" target="_blank">
    <svg viewBox="0 0 250 250" width="40" height="40" style="position: absolute; top: 0; border: 0; right: 0; z-index: 99;" aria-hidden="true">
    <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- BEGIN TITLEAREA-->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr  style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">E.V.E
   </div>
   <div id="projectbrief">v2022.09.01</div>
  </td>
 </tr>
   <tr><td colspan="2" style="padding: 20px 0px 0px 0px;">        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.svg"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td></tr>
 </tbody>
</table>
</div>
<!--END TITLEAREA -->
<!-- end header part -->
<!-- Generated by Doxygen 1.9.5 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search",'Search','.html');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('dev_cmake.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Building for Testing </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p ><a class="anchor" id="md_eve_doc_internals_dev_cmake"></a></p>
<p >From now on, we make the assumption your Docker instance is running and that you're logged into its interactive shell as per <a class="el" href="dev_environment.html">the protocol previously defined</a>. In this tutorial, we will go over the process to configure the tests and run them properly.</p>
<h1><a class="anchor" id="autotoc_md124"></a>
CMake setup</h1>
<p >First, you'd need to create a build directory and cd into it</p>
<pre class="fragment">mkdir build_arch &amp;&amp; cd build_arch
</pre><p ><b>EVE</b> provides a set of CMake toolchain files configured for each compiler present in the Docker instance. You can simply use them to configure your CMake. If you want to pass additional options, like specific architecture or optimization settings, you can use the <code>-DEVE_OPTIONS</code> CMake arguments.</p>
<p >The following table provides the CMake command line used for our classic CI setup using the Ninja generator.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration   </th><th class="markdownTableHeadNone">CMake command    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Emulated   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-DEVE_NO_SIMD'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_sse2   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-msse2'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_sse2-asan   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.asan.cmake -DEVE_OPTIONS='-msse2'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_sse4   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-msse4'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_avx   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_avx2   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx2'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_fma   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-mavx2 -mfma'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">X86_avx512   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86.cmake -DEVE_OPTIONS='-march=skylake-avx512'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">X86_avx512_no_native   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/clang.x86_sde.cmake -DEVE_OPTIONS='-march=skylake-avx512'    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Aarch64(arm-v8)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.aarch64.cmake    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Arm (arm-v7)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.arm.cmake    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">wasm   </td><td class="markdownTableBodyNone">emcmake cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE='../cmake/toolchain/emcc.cmake'    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Arm (sve-128)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.sve128.cmake    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Arm (sve-256)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.sve256.cmake    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Arm (sve-512)   </td><td class="markdownTableBodyNone">cmake .. -G Ninja -DCMAKE_TOOLCHAIN_FILE=../cmake/toolchain/gcc.sve512.cmake   </td></tr>
</table>
<p >Once run, your build folder should contain all the necessary artifact to compile and run <b>EVE</b> test suite.</p>
<h1><a class="anchor" id="autotoc_md125"></a>
Compiling EVE Unit Tests</h1>
<p ><b>EVE</b> provides a large number of test targets that are grouped by theme. Each of these themes and tests with a theme can be compiled with a proper target.</p>
<p >In term of options, we encourage you to use the <code>-DEVE_NO_FORCEINLINE</code> macro that prevents costly optimization to be used during the compilation of tests.</p>
<p >The following table list the main high-level themed target.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>doc.exe</code>   </td><td class="markdownTableBodyNone">Target for all documentation examples    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>doc.core.exe</code>   </td><td class="markdownTableBodyNone">Target for functions documentation examples    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>examples.exe</code>   </td><td class="markdownTableBodyNone">Target for all tutorials    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>examples.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for algorithms related tutorials    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>examples.oop.exe</code>   </td><td class="markdownTableBodyNone">Target for UDT related tutorials    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.exe</code>   </td><td class="markdownTableBodyNone">Target for all unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for standard algorithm unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.api.exe</code>   </td><td class="markdownTableBodyNone">Target for base API unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.arch.exe</code>   </td><td class="markdownTableBodyNone">Target for architecture detection unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.constant.exe</code>   </td><td class="markdownTableBodyNone">Target for constant unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.internals.exe</code>   </td><td class="markdownTableBodyNone">Target for internal components unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.memory.exe</code>   </td><td class="markdownTableBodyNone">Target for memory handling unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.meta.exe</code>   </td><td class="markdownTableBodyNone">Target for traits unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.algorithm.exe</code>   </td><td class="markdownTableBodyNone">Target for SIMD algorithms unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.combinatorial.exe</code>   </td><td class="markdownTableBodyNone">Target for combinatorics functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.core.exe</code>   </td><td class="markdownTableBodyNone">Target for arithmetic functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.elliptic.exe</code>   </td><td class="markdownTableBodyNone">Target for elliptic functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.math.exe</code>   </td><td class="markdownTableBodyNone">Target for math functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.polynomial.exe</code>   </td><td class="markdownTableBodyNone">Target for polynomial functions unit tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>unit.probas.exe</code>   </td><td class="markdownTableBodyNone">Target for probability functions unit tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>unit.special.exe</code>   </td><td class="markdownTableBodyNone">Target for special functions unit tests   </td></tr>
</table>
<p >For example, the test for the <code>abs</code> function, which is a member of the arithmetic module, can be compiled via:</p>
<pre class="fragment">ninja unit.core.abs.exe
</pre><p >Once compiled, the test executable are located in the <code>unit</code> folder and can be run via:</p>
<pre class="fragment">./unit/unit.core.abs.exe
</pre><p >The <code>unit.exe</code> target is very large and requires a comfortable amount of CPUs to be compiled in parallel.</p>
<h1><a class="anchor" id="autotoc_md126"></a>
Compiling EVE Random Tests</h1>
<p >Random tests run a given function over a samples of random values to test its relative precision. The following table list the main high-level random target.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Target   </th><th class="markdownTableHeadNone">Content    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.exe</code>   </td><td class="markdownTableBodyNone">Target for all random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.algo.exe</code>   </td><td class="markdownTableBodyNone">Target for standard algorithm random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.api.exe</code>   </td><td class="markdownTableBodyNone">Target for base API random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.arch.exe</code>   </td><td class="markdownTableBodyNone">Target for architecture detection random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.constant.exe</code>   </td><td class="markdownTableBodyNone">Target for constant random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.internals.exe</code>   </td><td class="markdownTableBodyNone">Target for internal components random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.memory.exe</code>   </td><td class="markdownTableBodyNone">Target for memory handling random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.meta.exe</code>   </td><td class="markdownTableBodyNone">Target for traits random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.algorithm.exe</code>   </td><td class="markdownTableBodyNone">Target for SIMD algorithms random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.combinatorial.exe</code>   </td><td class="markdownTableBodyNone">Target for combinatorics functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.core.exe</code>   </td><td class="markdownTableBodyNone">Target for arithmetic functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.elliptic.exe</code>   </td><td class="markdownTableBodyNone">Target for elliptic functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.math.exe</code>   </td><td class="markdownTableBodyNone">Target for math functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.polynomial.exe</code>   </td><td class="markdownTableBodyNone">Target for polynomial functions random tests    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>random.probas.exe</code>   </td><td class="markdownTableBodyNone">Target for probability functions random tests    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>random.special.exe</code>   </td><td class="markdownTableBodyNone">Target for special functions random tests   </td></tr>
</table>
<p >For example, all the random tests for the <code>abs</code> function, which is a member of the arithmetic module, can be compiled via:</p>
<pre class="fragment">ninja random.core.abs.exe
</pre><p >Once compiled, the test executable are located in the <code>unit</code> folder and can be run via:</p>
<pre class="fragment">./unit/unit.core.abs.exe
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.20-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
  </ul>
</div>
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</div> <!-- DOXYSTRAP RELATED -->
</body>
</html>
